# 프로젝트 개발 과정 요약 보고서

## 1. 프로젝트 개요

- **초기 목표**: 부동산 시세 및 매물 정보를 웹 크롤링하여 사용자에게 보여주는 서비스 개발.
- **최종 결과**: 사용자가 지역과 날짜를 선택하면 국토교통부 실거래가 API를 통해 아파트 매매 실거래가를 조회하고, 통계 및 시각화 자료를 확인하며, 특정 아파트의 최근 3년간 시세 변동 추이를 그래프로 볼 수 있는 웹 애플리케이션. 최종 산출물은 Google Cloud Run에 배포된 안정적인 웹 서비스 링크입니다.

## 2. 주요 개발 마일스톤 및 문제 해결 과정

### 가. 초기 목표 수정: 웹 크롤링에서 OpenAPI 사용으로 전환

- **초기 시도**: 동적 웹 페이지(네이버 부동산 등)를 크롤링하기 위해 Selenium을 사용했으나, Codespaces 환경의 제약으로 인해 드라이버 설정 및 실행에 실패했습니다.
- **전략적 전환 (Pivot)**: 불안정한 크롤링 방식 대신, 정부가 제공하는 안정적이고 신뢰도 높은 **국토교통부 실거래가 공개 OpenAPI**를 사용하기로 결정했습니다. 이는 프로젝트의 성공에 결정적인 전환점이 되었습니다.

### 나. 핵심 기능 개발 및 API 연동

- Python과 Streamlit을 사용하여 웹 애플리케이션의 기본 UI를 구축했습니다.
- `requests` 라이브러리를 사용하여 국토교통부 API를 호출하고, XML 형식의 응답을 `pandas` 데이터프레임으로 파싱하여 표 형태로 시각화하는 핵심 기능을 구현했습니다.
- Cloud Run 배포 환경에서 HTTP 요청이 차단되는 문제를 발견하고, API 엔드포인트를 **HTTPS**로 변경하여 해결했습니다.

### 다. 주요 기능 추가: 아파트별 3년 시세 조회

- 사용자가 특정 아파트를 선택하면, 최근 3년(36개월)간의 거래 내역을 월별로 API를 통해 조회하고, 이를 취합하여 시세 변동을 꺾은선 그래프로 시각화하는 기능을 추가했습니다.
- `st.progress`와 `st.spinner`를 사용하여 데이터 조회 중 사용자에게 진행 상황을 시각적으로 보여주어 UX를 개선했습니다.

### 라. Cloud Run 배포 및 환경 문제 해결

프로젝트의 가장 큰 난관은 Cloud Run 환경에서 발생하는 예측 불가능한 오류들을 해결하는 과정이었습니다.

1.  **한글 폰트 깨짐 문제**:
    - 로컬에서는 정상적으로 보이던 Matplotlib 차트의 한글이 Cloud Run에서는 모두 깨지는 현상이 발생했습니다.
    - **가설 1**: 컨테이너에 한글 폰트 미설치 → `Dockerfile`에 `apt-get install fonts-nanum` 추가. (실패)
    - **가설 2**: 시스템이 폰트를 인식하지 못함 → `fontconfig` 설치 및 `fc-cache` 실행 추가. (실패)
    - **가설 3**: Matplotlib가 폰트를 찾지 못함 → `app.py`에서 폰트 경로를 직접 지정하고 Matplotlib 폰트 매니저에 등록. (실패)

2.  **컨테이너 시작 실패 (`Container failed to start`)**:
    - 폰트 문제를 해결하는 과정에서, 어느 순간부터 컨테이너가 아예 시작되지 않는 더 심각한 문제가 발생했습니다.
    - **원인 분석**: Cloud Run 로그를 상세히 추적한 결과, `FileNotFoundError`가 Streamlit의 내부 라이브러리(`watchdog`)에서 발생함을 확인했습니다. 이는 폰트와는 전혀 무관한 문제였습니다. Streamlit의 파일 감시 기능이 Cloud Run의 최소화된 파일 시스템 환경과 충돌하여 앱 시작 자체를 막고 있었습니다.
    - **최종 해결**: `Dockerfile`의 실행 명령어(`CMD`)에 `--server.fileWatcherType=none` 옵션을 추가하여 불필요한 파일 감시 기능을 비활성화하자, 컨테이너가 정상적으로 시작되었습니다.

3.  **최종 폰트 문제 해결**:
    - 컨테이너 시작 문제가 해결되자, 이전에 적용했던 **`Dockerfile`의 폰트 설치 및 캐시 생성 로직**과 **`app.py`의 Matplotlib 폰트 설정 코드**가 마침내 정상적으로 작동하여 모든 한글이 완벽하게 표시되었습니다.

## 3. 결론

- 본 프로젝트는 초기 목표였던 웹 크롤링의 기술적 난관을 OpenAPI 활용이라는 현명한 대안으로 극복하고 성공적으로 완수되었습니다.
- 개발 과정에서 발생한 수많은 환경 문제, 특히 Cloud Run에서의 한글 폰트 및 컨테이너 시작 오류는, 체계적인 디버깅과 로그 분석을 통해 근본 원인을 찾아 해결할 수 있다는 중요한 교훈을 남겼습니다.
- 현재 최종 애플리케이션은 모든 기능이 안정적으로 작동하며, Google Cloud Run을 통해 성공적으로 배포되었습니다.